{"ast":null,"code":"var _jsxFileName = \"/Users/jorgeabdo/Desktop/Hale/admin/src/views/productos/productForm.js\";\nimport React, { useState } from \"react\";\nimport { Button, Form, Input, InputNumber, Row, Select, Upload } from \"antd\";\nimport { useHistory } from \"react-router-dom\";\nimport firebase from \"firebase\";\nimport { ContainerOutlined, TagOutlined, UploadOutlined } from \"@ant-design/icons\";\nconst {\n  TextArea\n} = Input;\n\nconst ProductForm = ({\n  product = {},\n  isEditing = false\n}) => {\n  let uploadedImgs = [];\n  let history = useHistory();\n\n  if (product.image) {\n    product.image.forEach((image, i) => {\n      uploadedImgs.push({\n        uid: i,\n        name: `${i}.png`,\n        url: image\n      });\n    });\n  }\n\n  const [fileList, setFileList] = useState(uploadedImgs);\n  const [fileListUrl, setFileListUrl] = useState([]);\n\n  const firebaseStorage = (i, info) => {\n    let image = [];\n    const storage = firebase.storage();\n    console.log(fileList[i].uid);\n    const uploadTaskPDF = storage.ref(`products/${fileList[i].uid}`).put(fileList[i]);\n    uploadTaskPDF.on(\"state_changed\", snapshot => {// progress function ...\n    }, error => {\n      // Error function ...\n      console.error(error);\n    }, // eslint-disable-next-line no-loop-func\n    () => {\n      // complete function ...\n      storage.ref(\"products\").child(fileList[i].uid).getDownloadURL().then(urlPDF => {\n        image.push(urlPDF);\n\n        if (i === fileList.length - 1) {\n          const db = firebase.firestore();\n          db.collection(\"Products\").add({\n            name: info.name,\n            fullDescription: info.description,\n            shortDescription: info.description,\n            sku: info.sku,\n            price: info.price,\n            image,\n            stock: info.stock,\n            offerEnd: \"\",\n            discount: 0,\n            category: info.category,\n            tag: info.tags\n          }).then(() => {\n            history.push(\"/productos\");\n          }).catch(err => {\n            console.error(err);\n          });\n        }\n      });\n    });\n  };\n\n  const onFinish = info => {\n    for (var i = 0; i < fileList.length; i++) {\n      firebaseStorage(i, info);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    layout: \"vertical\",\n    onFinish: onFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"name\",\n    label: \"Name\",\n    initialValue: product.name || \"\",\n    rules: [{\n      required: true,\n      message: \"Please input product name!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(ContainerOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }),\n    placeholder: \"Please input product name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"description\",\n    label: \"Description\",\n    initialValue: product.shortDescription || \"\",\n    rules: [{\n      required: true,\n      message: \"Please input product description!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    rows: 4,\n    placeholder: \"Please input product description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"sku\",\n    label: \"SKU\",\n    initialValue: product.sku || \"\",\n    rules: [{\n      required: true,\n      message: \"Please input product SKU!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(TagOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 24\n      }\n    }),\n    placeholder: \"Please input SKU\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"category\",\n    label: \"Category\",\n    initialValue: product.category || [],\n    rules: [{\n      required: true,\n      message: \"Please input the product's categories!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    maxTagCount: 10,\n    mode: \"tags\",\n    autoClearSearchValue: true,\n    placeholder: \"Please input the product's categories\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"tags\",\n    label: \"Tags\",\n    initialValue: product.tag || [],\n    rules: [{\n      required: true,\n      message: \"Please input your product's tags!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    maxTagCount: 10,\n    mode: \"tags\",\n    autoClearSearchValue: true,\n    placeholder: \"Please input the product's tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"price\",\n    label: \"Price\",\n    initialValue: product.price || \"\",\n    rules: [{\n      required: true,\n      message: \"Please input product price!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InputNumber, {\n    style: {\n      minWidth: 150\n    },\n    formatter: value => `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"),\n    min: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"stock\",\n    label: \"Stock\",\n    initialValue: product.stock || \"\",\n    rules: [{\n      required: true,\n      message: \"Please input product stock!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InputNumber, {\n    style: {\n      minWidth: 150\n    },\n    min: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"image\",\n    label: \"Image(s)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Upload, {\n    beforeUpload: file => {\n      setFileList([...fileList, file]);\n      return false;\n    },\n    listType: \"picture\",\n    accept: \"image/*\",\n    fileList: fileList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, fileList.length <= 6 && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(UploadOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 27\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"Upload\"))), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    justify: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, \"Submit\"))));\n};\n\nexport default ProductForm;","map":{"version":3,"sources":["/Users/jorgeabdo/Desktop/Hale/admin/src/views/productos/productForm.js"],"names":["React","useState","Button","Form","Input","InputNumber","Row","Select","Upload","useHistory","firebase","ContainerOutlined","TagOutlined","UploadOutlined","TextArea","ProductForm","product","isEditing","uploadedImgs","history","image","forEach","i","push","uid","name","url","fileList","setFileList","fileListUrl","setFileListUrl","firebaseStorage","info","storage","console","log","uploadTaskPDF","ref","put","on","snapshot","error","child","getDownloadURL","then","urlPDF","length","db","firestore","collection","add","fullDescription","description","shortDescription","sku","price","stock","offerEnd","discount","category","tag","tags","catch","err","onFinish","required","message","minWidth","value","replace","file"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Form, Input, InputNumber, Row, Select, Upload } from \"antd\";\nimport { useHistory } from \"react-router-dom\";\nimport firebase from \"firebase\";\nimport {\n  ContainerOutlined,\n  TagOutlined,\n  UploadOutlined,\n} from \"@ant-design/icons\";\n\nconst { TextArea } = Input;\n\nconst ProductForm = ({ product = {}, isEditing = false }) => {\n  let uploadedImgs = [];\n  let history = useHistory();\n\n  if (product.image) {\n    product.image.forEach((image, i) => {\n      uploadedImgs.push({\n        uid: i,\n        name: `${i}.png`,\n        url: image,\n      });\n    });\n  }\n\n  const [fileList, setFileList] = useState(uploadedImgs);\n  const [fileListUrl, setFileListUrl] = useState([]);\n\n  const firebaseStorage = (i, info) => {\n    let image = [];\n    const storage = firebase.storage();\n    console.log(fileList[i].uid);\n    const uploadTaskPDF = storage\n      .ref(`products/${fileList[i].uid}`)\n      .put(fileList[i]);\n    uploadTaskPDF.on(\n      \"state_changed\",\n      (snapshot) => {\n        // progress function ...\n      },\n      (error) => {\n        // Error function ...\n        console.error(error);\n      },\n      // eslint-disable-next-line no-loop-func\n      () => {\n        // complete function ...\n        storage\n          .ref(\"products\")\n          .child(fileList[i].uid)\n          .getDownloadURL()\n          .then((urlPDF) => {\n            image.push(urlPDF);\n            if (i === fileList.length - 1) {\n              const db = firebase.firestore();\n              db.collection(\"Products\")\n                .add({\n                  name: info.name,\n                  fullDescription: info.description,\n                  shortDescription: info.description,\n                  sku: info.sku,\n                  price: info.price,\n                  image,\n                  stock: info.stock,\n                  offerEnd: \"\",\n                  discount: 0,\n                  category: info.category,\n                  tag: info.tags,\n                })\n                .then(() => {\n                  history.push(\"/productos\");\n                })\n                .catch((err) => {\n                  console.error(err);\n                });\n            }\n          });\n      }\n    );\n  };\n  const onFinish = (info) => {\n    for (var i = 0; i < fileList.length; i++) {\n      firebaseStorage(i, info);\n    }\n  };\n\n  return (\n    <Form layout=\"vertical\" onFinish={onFinish}>\n      <Form.Item\n        name=\"name\"\n        label=\"Name\"\n        initialValue={product.name || \"\"}\n        rules={[\n          {\n            required: true,\n            message: \"Please input product name!\",\n          },\n        ]}\n      >\n        <Input\n          prefix={<ContainerOutlined />}\n          placeholder=\"Please input product name\"\n        />\n      </Form.Item>\n      <Form.Item\n        name=\"description\"\n        label=\"Description\"\n        initialValue={product.shortDescription || \"\"}\n        rules={[\n          {\n            required: true,\n            message: \"Please input product description!\",\n          },\n        ]}\n      >\n        <TextArea rows={4} placeholder=\"Please input product description\" />\n      </Form.Item>\n      <Form.Item\n        name=\"sku\"\n        label=\"SKU\"\n        initialValue={product.sku || \"\"}\n        rules={[\n          {\n            required: true,\n            message: \"Please input product SKU!\",\n          },\n        ]}\n      >\n        <Input prefix={<TagOutlined />} placeholder=\"Please input SKU\" />\n      </Form.Item>\n      <Form.Item\n        name=\"category\"\n        label=\"Category\"\n        initialValue={product.category || []}\n        rules={[\n          {\n            required: true,\n            message: \"Please input the product's categories!\",\n          },\n        ]}\n      >\n        <Select\n          maxTagCount={10}\n          mode=\"tags\"\n          autoClearSearchValue\n          placeholder=\"Please input the product's categories\"\n        />\n      </Form.Item>\n      <Form.Item\n        name=\"tags\"\n        label=\"Tags\"\n        initialValue={product.tag || []}\n        rules={[\n          {\n            required: true,\n            message: \"Please input your product's tags!\",\n          },\n        ]}\n      >\n        <Select\n          maxTagCount={10}\n          mode=\"tags\"\n          autoClearSearchValue\n          placeholder=\"Please input the product's tags\"\n        />\n      </Form.Item>\n      <Form.Item\n        name=\"price\"\n        label=\"Price\"\n        initialValue={product.price || \"\"}\n        rules={[\n          {\n            required: true,\n            message: \"Please input product price!\",\n          },\n        ]}\n      >\n        <InputNumber\n          style={{ minWidth: 150 }}\n          formatter={(value) =>\n            `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n          }\n          min={0}\n        />\n      </Form.Item>\n      <Form.Item\n        name=\"stock\"\n        label=\"Stock\"\n        initialValue={product.stock || \"\"}\n        rules={[\n          {\n            required: true,\n            message: \"Please input product stock!\",\n          },\n        ]}\n      >\n        <InputNumber style={{ minWidth: 150 }} min={0} />\n      </Form.Item>\n      <Form.Item name=\"image\" label=\"Image(s)\">\n        <Upload\n          beforeUpload={(file) => {\n            setFileList([...fileList, file]);\n            return false;\n          }}\n          listType=\"picture\"\n          accept=\"image/*\"\n          fileList={fileList}\n        >\n          {fileList.length <= 6 && (\n            <Button icon={<UploadOutlined />}>Upload</Button>\n          )}\n        </Upload>\n      </Form.Item>\n      <Form.Item>\n        <Row justify=\"end\">\n          <Button type=\"primary\" htmlType=\"submit\">\n            Submit\n          </Button>\n        </Row>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default ProductForm;\n"]},"metadata":{},"sourceType":"module"}