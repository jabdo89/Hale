{"version":3,"sources":["pages/other/Checkout.js"],"names":["connect","state","cartItems","cartData","currency","currencyData","location","pathname","cartTotalPrice","history","useHistory","useState","apartmentNum","message","form","setForm","handleChange","e","target","name","value","content","to","process","headerTop","className","length","onSubmit","preventDefault","firebase","firestore","collection","add","firstName","lastname","lastName","phone","email","price","items","address","street","streetAddress","city","zipcode","then","docRef","push","id","console","log","catch","error","type","required","onChange","placeholder","defaultValue","map","cartItem","key","discountedPrice","getDiscountPrice","discount","finalProductPrice","currencyRate","toFixed","finalDiscountedPrice","quantity","currencySymbol"],"mappings":"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","file":"static/js/20.7b0c135e.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\r\nimport React, { Fragment, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport MetaTags from \"react-meta-tags\";\r\nimport { connect } from \"react-redux\";\r\nimport firebase from \"firebase\";\r\nimport { BreadcrumbsItem } from \"react-breadcrumbs-dynamic\";\r\nimport { getDiscountPrice } from \"../../helpers/product\";\r\nimport LayoutOne from \"../../layouts/LayoutOne\";\r\nimport Breadcrumb from \"../../wrappers/breadcrumb/Breadcrumb\";\r\n\r\nconst Checkout = ({ location, cartItems, currency }) => {\r\n  const { pathname } = location;\r\n  let cartTotalPrice = 0;\r\n  let history = useHistory();\r\n  const [form, setForm] = useState({\r\n    apartmentNum: \"\",\r\n    message: \"\",\r\n  });\r\n\r\n  const createOrder = (e) => {\r\n    e.preventDefault();\r\n    const db = firebase.firestore();\r\n    db.collection(\"Orders\")\r\n      .add({\r\n        firstName: form.firstName,\r\n        lastname: form.lastName,\r\n        phone: form.phone,\r\n        email: form.email,\r\n        currency: currency,\r\n        price: cartTotalPrice,\r\n        items: cartItems,\r\n        message: form.message,\r\n        address: {\r\n          street: form.streetAddress,\r\n          state: form.state,\r\n          city: form.city,\r\n          zipcode: form.zipcode,\r\n          apartmentNum: form.apartmentNum,\r\n        },\r\n      })\r\n      .then(function (docRef) {\r\n        history.push(\"/postCheckout/\" + docRef.id);\r\n        console.log(\"Document written with ID: \", docRef.id);\r\n      })\r\n      .catch(function (error) {\r\n        console.error(\"Error adding document: \", error);\r\n      });\r\n  };\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <MetaTags>\r\n        <title>Sauco | Checkout</title>\r\n        <meta\r\n          name=\"description\"\r\n          content=\"Checkout page of flone react minimalist eCommerce template.\"\r\n        />\r\n      </MetaTags>\r\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + \"/\"}>Home</BreadcrumbsItem>\r\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + pathname}>\r\n        Checkout\r\n      </BreadcrumbsItem>\r\n      <LayoutOne headerTop=\"visible\">\r\n        {/* breadcrumb */}\r\n        <Breadcrumb />\r\n        <div className=\"checkout-area pt-95 pb-100\">\r\n          <div className=\"container\">\r\n            {cartItems && cartItems.length >= 1 ? (\r\n              <form onSubmit={createOrder} id=\"checkout\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-lg-7\">\r\n                    <div className=\"billing-info-wrap\">\r\n                      <h3>Billing Details</h3>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>First Name</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              required\r\n                              name=\"firstName\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Last Name</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              required\r\n                              name=\"lastName\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-12\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Street Address</label>\r\n                            <input\r\n                              className=\"billing-address\"\r\n                              placeholder=\"House number and street name\"\r\n                              type=\"text\"\r\n                              required\r\n                              name=\"streetAddress\"\r\n                              onChange={handleChange}\r\n                            />\r\n                            <input\r\n                              placeholder=\"Apartment, suite, unit etc.\"\r\n                              type=\"text\"\r\n                              name=\"apartmentNum\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-12\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Town / City</label>\r\n                            <input\r\n                              required\r\n                              type=\"text\"\r\n                              name=\"city\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>State</label>\r\n                            <input\r\n                              required\r\n                              type=\"text\"\r\n                              name=\"state\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Postcode / ZIP</label>\r\n                            <input\r\n                              required\r\n                              type=\"text\"\r\n                              name=\"zipcode\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Phone</label>\r\n                            <input\r\n                              required\r\n                              type=\"tel\"\r\n                              name=\"phone\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Email Address</label>\r\n                            <input\r\n                              required\r\n                              type=\"email\"\r\n                              name=\"email\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"additional-info-wrap\">\r\n                        <h4>Additional information</h4>\r\n                        <div className=\"additional-info\">\r\n                          <label>Order notes</label>\r\n                          <textarea\r\n                            placeholder=\"Notes about your order, e.g. special notes for delivery. \"\r\n                            name=\"message\"\r\n                            defaultValue={\"\"}\r\n                            onChange={handleChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"col-lg-5\">\r\n                    <div className=\"your-order-area\">\r\n                      <h3>Your order</h3>\r\n                      <div className=\"your-order-wrap gray-bg-4\">\r\n                        <div className=\"your-order-product-info\">\r\n                          <div className=\"your-order-top\">\r\n                            <ul>\r\n                              <li>Product</li>\r\n                              <li>Total</li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"your-order-middle\">\r\n                            <ul>\r\n                              {cartItems.map((cartItem, key) => {\r\n                                const discountedPrice = getDiscountPrice(\r\n                                  cartItem.price,\r\n                                  cartItem.discount\r\n                                );\r\n                                const finalProductPrice = (\r\n                                  cartItem.price * currency.currencyRate\r\n                                ).toFixed(2);\r\n                                const finalDiscountedPrice = (\r\n                                  discountedPrice * currency.currencyRate\r\n                                ).toFixed(2);\r\n\r\n                                discountedPrice != null\r\n                                  ? (cartTotalPrice +=\r\n                                      finalDiscountedPrice * cartItem.quantity)\r\n                                  : (cartTotalPrice +=\r\n                                      finalProductPrice * cartItem.quantity);\r\n                                return (\r\n                                  <li key={key}>\r\n                                    <span className=\"order-middle-left\">\r\n                                      {cartItem.name} X {cartItem.quantity}\r\n                                    </span>{\" \"}\r\n                                    <span className=\"order-price\">\r\n                                      {discountedPrice !== null\r\n                                        ? currency.currencySymbol +\r\n                                          (\r\n                                            finalDiscountedPrice *\r\n                                            cartItem.quantity\r\n                                          ).toFixed(2)\r\n                                        : currency.currencySymbol +\r\n                                          (\r\n                                            finalProductPrice *\r\n                                            cartItem.quantity\r\n                                          ).toFixed(2)}\r\n                                    </span>\r\n                                  </li>\r\n                                );\r\n                              })}\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"your-order-bottom\">\r\n                            <ul>\r\n                              <li className=\"your-order-shipping\">Shipping</li>\r\n                              <li>Free shipping</li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"your-order-total\">\r\n                            <ul>\r\n                              <li className=\"order-total\">Total</li>\r\n                              <li>\r\n                                {currency.currencySymbol +\r\n                                  cartTotalPrice.toFixed(2)}\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"payment-method\"></div>\r\n                      </div>\r\n                      <div className=\"place-order mt-25\">\r\n                        <button\r\n                          type=\"submit\"\r\n                          form=\"checkout\"\r\n                          className=\"btn-hover\"\r\n                        >\r\n                          Place Order\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            ) : (\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-12\">\r\n                  <div className=\"item-empty-area text-center\">\r\n                    <div className=\"item-empty-area__icon mb-30\">\r\n                      <i className=\"pe-7s-cash\"></i>\r\n                    </div>\r\n                    <div className=\"item-empty-area__text\">\r\n                      No items found in cart to checkout <br />{\" \"}\r\n                      <Link to={process.env.PUBLIC_URL + \"/shop-grid-standard\"}>\r\n                        Shop Now\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </LayoutOne>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nCheckout.propTypes = {\r\n  cartItems: PropTypes.array,\r\n  currency: PropTypes.object,\r\n  location: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    cartItems: state.cartData,\r\n    currency: state.currencyData,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Checkout);\r\n"],"sourceRoot":""}