{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","pages/other/Checkout.js"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","connect","state","cartItems","cartData","currency","currencyData","profile","firebase","dispatch","addToCart","item","addToast","quantityCount","location","pathname","cartTotalPrice","useHistory","useState","apartmentNum","message","form","setForm","useToasts","createOrder","fn","e","a","preventDefault","functions","recommendedAlgo","httpsCallable","offer","recommended","console","log","self","this","args","arguments","apply","err","undefined","handleChange","target","name","content","to","process","LayoutOne","headerTop","Breadcrumb","className","length","onSubmit","id","type","required","onChange","placeholder","defaultValue","map","cartItem","discountedPrice","getDiscountPrice","price","discount","finalProductPrice","currencyRate","toFixed","finalDiscountedPrice","isEmpty","quantity","minQuant","priceDis","currencySymbol"],"mappings":"sGAAAA,EAAOC,QAAU,EAAQ,M,+ECAzB,SAASC,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,G,gJC4UxBS,6BAhBS,SAACC,GACvB,MAAO,CACLC,UAAWD,EAAME,SACjBC,SAAUH,EAAMI,aAChBC,QAASL,EAAMM,SAASD,YAID,SAACE,GAC1B,MAAO,CACLC,UAAW,SAACC,EAAMC,EAAUC,GAC1BJ,EAASC,YAAUC,EAAMC,EAAUC,QAK1BZ,EA1UE,SAAC,GAA2D,IAAzDa,EAAwD,EAAxDA,SAAUX,EAA8C,EAA9CA,UAAWE,EAAmC,EAAnCA,SAAUE,EAAyB,EAAzBA,QAASG,EAAgB,EAAhBA,UAClDK,EAAaD,EAAbC,SACJC,EAAiB,EAFqD,GAG5DC,cACUC,mBAAS,CAC/BC,aAAc,GACdC,QAAS,MAN+D,mBAInEC,EAJmE,KAI7DC,EAJ6D,KAQlEV,EAAaW,sBAAbX,SACFY,EAAW,eDPuBC,ECOvB,GDPuBA,ECOvB,UAAG,WAAOC,GAAP,mBAAAC,EAAA,6DAClBD,EAAEE,iBAEIC,EAAYrB,IAASqB,YACrBC,EAAkBD,EAAUE,cAAc,kBAJ9B,SAKQD,EAAgB,CAAEE,MAH9B,WAFI,OAKZC,EALY,OAMlBC,QAAQC,IAAIF,GANM,0CDNb,WACL,IAAIG,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIxC,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMqC,EAAGe,MAAMJ,EAAME,GAEzB,SAAS/C,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOiD,GACdtD,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASiD,GAGnElD,OAAMmD,QCRO,sDAkCXC,EAAe,SAACjB,GACpBJ,EAAQ,2BAAKD,GAAN,kBAAaK,EAAEkB,OAAOC,KAAOnB,EAAEkB,OAAOhD,UAE/C,OACE,kBAAC,WAAD,KACE,kBAAC,IAAD,KACE,mDACA,0BACEiD,KAAK,cACLC,QAAQ,iEAGZ,kBAAC,kBAAD,CAAiBC,GAA6B,KAA9C,QACA,kBAAC,kBAAD,CAAiBA,GAAIC,GAAyBjC,GAA9C,YAGA,kBAACkC,EAAA,EAAD,CAAWC,UAAU,WAEnB,kBAACC,EAAA,EAAD,MACA,yBAAKC,UAAU,8BACb,yBAAKA,UAAU,aACZjD,GAAaA,EAAUkD,QAAU,EAChC,0BAAMC,SAAU9B,EAAa+B,GAAG,YAC9B,yBAAKH,UAAU,OACb,yBAAKA,UAAU,YACb,yBAAKA,UAAU,qBACb,+CACA,yBAAKA,UAAU,OACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,sBACb,6CACA,2BACEI,KAAK,OACLC,UAAQ,EACRZ,KAAK,YACLa,SAAUf,MAIhB,yBAAKS,UAAU,qBACb,yBAAKA,UAAU,sBACb,4CACA,2BACEI,KAAK,OACLC,UAAQ,EACRZ,KAAK,WACLa,SAAUf,MAIhB,yBAAKS,UAAU,aACb,yBAAKA,UAAU,sBACb,iDACA,2BACEA,UAAU,kBACVO,YAAY,+BACZH,KAAK,OACLC,UAAQ,EACRZ,KAAK,gBACLa,SAAUf,IAEZ,2BACEgB,YAAY,8BACZH,KAAK,OACLX,KAAK,eACLa,SAAUf,MAIhB,yBAAKS,UAAU,aACb,yBAAKA,UAAU,sBACb,8CACA,2BACEK,UAAQ,EACRD,KAAK,OACLX,KAAK,OACLa,SAAUf,MAIhB,yBAAKS,UAAU,qBACb,yBAAKA,UAAU,sBACb,wCACA,2BACEK,UAAQ,EACRD,KAAK,OACLX,KAAK,QACLa,SAAUf,MAIhB,yBAAKS,UAAU,qBACb,yBAAKA,UAAU,sBACb,iDACA,2BACEK,UAAQ,EACRD,KAAK,OACLX,KAAK,UACLa,SAAUf,MAIhB,yBAAKS,UAAU,qBACb,yBAAKA,UAAU,sBACb,wCACA,2BACEK,UAAQ,EACRD,KAAK,MACLX,KAAK,QACLa,SAAUf,MAIhB,yBAAKS,UAAU,qBACb,yBAAKA,UAAU,sBACb,gDACA,2BACEK,UAAQ,EACRD,KAAK,QACLX,KAAK,QACLa,SAAUf,OAMlB,yBAAKS,UAAU,wBACb,sDACA,yBAAKA,UAAU,mBACb,8CACA,8BACEO,YAAY,4DACZd,KAAK,UACLe,aAAc,GACdF,SAAUf,QAOpB,yBAAKS,UAAU,YACb,yBAAKA,UAAU,mBACb,0CACA,yBAAKA,UAAU,6BACb,yBAAKA,UAAU,2BACb,yBAAKA,UAAU,kBACb,4BACE,uCACA,uCAGJ,yBAAKA,UAAU,qBACb,4BACGjD,EAAU0D,KAAI,SAACC,EAAUrE,GACxB,IAAMsE,EAAkBC,YACtBF,EAASG,MACTH,EAASI,UAEPC,GACFL,EAASG,MAAQ5D,EAAS+D,cAC1BC,QAAQ,GACJC,GACJP,EAAkB1D,EAAS+D,cAC3BC,QAAQ,GAsBV,OApBK9D,EAAQgE,UACPT,EAASU,SAAWV,EAASW,UAC/B/D,EACEoD,EACAlD,EACAkD,EAASW,SAAWX,EAASU,UAGtBV,EAASW,SACpBN,IACEL,EAASY,SAAWrE,EAAS+D,cAC7BC,QAAQ,IAGO,MAAnBN,GAA2BxD,EAAQgE,QAC9BvD,GACCsD,EAAuBR,EAASU,SACjCxD,GACCmD,EAAoBL,EAASU,SAGjC,wBAAI/E,IAAKA,GACP,0BAAM2D,UAAU,qBACbU,EAASjB,KADZ,MACqBiB,EAASU,UACtB,IACR,0BAAMpB,UAAU,eACO,OAApBW,GACDxD,EAAQgE,QACJlE,EAASsE,gBAEPL,EACAR,EAASU,UACTH,QAAQ,GACVhE,EAASsE,gBAEPR,EACAL,EAASU,UACTH,QAAQ,UAO1B,yBAAKjB,UAAU,qBACb,4BACE,wBAAIA,UAAU,uBAAd,YACA,+CAGJ,yBAAKA,UAAU,oBACb,4BACE,wBAAIA,UAAU,eAAd,SACA,4BACG/C,EAASsE,eACR3D,EAAeqD,QAAQ,OAKjC,yBAAKjB,UAAU,oBAEjB,yBAAKA,UAAU,qBACb,4BACEI,KAAK,SACLnC,KAAK,WACL+B,UAAU,aAHZ,oBAaV,yBAAKA,UAAU,OACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,+BACb,yBAAKA,UAAU,+BACb,uBAAGA,UAAU,gBAEf,yBAAKA,UAAU,yBAAf,sCACqC,6BAAO,IAC1C,kBAAC,IAAD,CAAML,GAA6B,uBAAnC","file":"static/js/18.a1355543.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import PropTypes from \"prop-types\";\r\nimport React, { Fragment, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport MetaTags from \"react-meta-tags\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\nimport { connect } from \"react-redux\";\r\nimport firebase from \"firebase\";\r\nimport { BreadcrumbsItem } from \"react-breadcrumbs-dynamic\";\r\nimport { getDiscountPrice } from \"../../helpers/product\";\r\nimport LayoutOne from \"../../layouts/LayoutOne\";\r\nimport Breadcrumb from \"../../wrappers/breadcrumb/Breadcrumb\";\r\nimport { addToCart } from \"../../redux/actions/cartActions\";\r\n\r\nconst Checkout = ({ location, cartItems, currency, profile, addToCart }) => {\r\n  const { pathname } = location;\r\n  let cartTotalPrice = 0;\r\n  let history = useHistory();\r\n  const [form, setForm] = useState({\r\n    apartmentNum: \"\",\r\n    message: \"\",\r\n  });\r\n  const { addToast } = useToasts();\r\n  const createOrder = async (e) => {\r\n    e.preventDefault();\r\n    const offer = \"jejeje\";\r\n    const functions = firebase.functions();\r\n    const recommendedAlgo = functions.httpsCallable(\"conektaPayment\");\r\n    const recommended = await recommendedAlgo({ offer });\r\n    console.log(recommended);\r\n    // const db = firebase.firestore();\r\n    // db.collection(\"Orders\")\r\n    //   .add({\r\n    //     firstName: form.firstName,\r\n    //     lastname: form.lastName,\r\n    //     phone: form.phone,\r\n    //     email: form.email,\r\n    //     currency: currency,\r\n    //     price: cartTotalPrice,\r\n    //     items: cartItems,\r\n    //     message: form.message,\r\n    //     address: {\r\n    //       street: form.streetAddress,\r\n    //       state: form.state,\r\n    //       city: form.city,\r\n    //       zipcode: form.zipcode,\r\n    //       apartmentNum: form.apartmentNum,\r\n    //     },\r\n    //   })\r\n    //   .then(function (docRef) {\r\n    //     history.push(\"/postCheckout/\" + docRef.id);\r\n    //     console.log(\"Document written with ID: \", docRef.id);\r\n    //   })\r\n    //   .catch(function (error) {\r\n    //     console.error(\"Error adding document: \", error);\r\n    //   });\r\n  };\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <MetaTags>\r\n        <title>Sauco | Checkout</title>\r\n        <meta\r\n          name=\"description\"\r\n          content=\"Checkout page of flone react minimalist eCommerce template.\"\r\n        />\r\n      </MetaTags>\r\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + \"/\"}>Home</BreadcrumbsItem>\r\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + pathname}>\r\n        Checkout\r\n      </BreadcrumbsItem>\r\n      <LayoutOne headerTop=\"visible\">\r\n        {/* breadcrumb */}\r\n        <Breadcrumb />\r\n        <div className=\"checkout-area pt-95 pb-100\">\r\n          <div className=\"container\">\r\n            {cartItems && cartItems.length >= 1 ? (\r\n              <form onSubmit={createOrder} id=\"checkout\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-lg-7\">\r\n                    <div className=\"billing-info-wrap\">\r\n                      <h3>Billing Details</h3>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>First Name</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              required\r\n                              name=\"firstName\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Last Name</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              required\r\n                              name=\"lastName\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-12\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Street Address</label>\r\n                            <input\r\n                              className=\"billing-address\"\r\n                              placeholder=\"House number and street name\"\r\n                              type=\"text\"\r\n                              required\r\n                              name=\"streetAddress\"\r\n                              onChange={handleChange}\r\n                            />\r\n                            <input\r\n                              placeholder=\"Apartment, suite, unit etc.\"\r\n                              type=\"text\"\r\n                              name=\"apartmentNum\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-12\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Town / City</label>\r\n                            <input\r\n                              required\r\n                              type=\"text\"\r\n                              name=\"city\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>State</label>\r\n                            <input\r\n                              required\r\n                              type=\"text\"\r\n                              name=\"state\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Postcode / ZIP</label>\r\n                            <input\r\n                              required\r\n                              type=\"text\"\r\n                              name=\"zipcode\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Phone</label>\r\n                            <input\r\n                              required\r\n                              type=\"tel\"\r\n                              name=\"phone\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-md-6\">\r\n                          <div className=\"billing-info mb-20\">\r\n                            <label>Email Address</label>\r\n                            <input\r\n                              required\r\n                              type=\"email\"\r\n                              name=\"email\"\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"additional-info-wrap\">\r\n                        <h4>Additional information</h4>\r\n                        <div className=\"additional-info\">\r\n                          <label>Order notes</label>\r\n                          <textarea\r\n                            placeholder=\"Notes about your order, e.g. special notes for delivery. \"\r\n                            name=\"message\"\r\n                            defaultValue={\"\"}\r\n                            onChange={handleChange}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"col-lg-5\">\r\n                    <div className=\"your-order-area\">\r\n                      <h3>Your order</h3>\r\n                      <div className=\"your-order-wrap gray-bg-4\">\r\n                        <div className=\"your-order-product-info\">\r\n                          <div className=\"your-order-top\">\r\n                            <ul>\r\n                              <li>Product</li>\r\n                              <li>Total</li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"your-order-middle\">\r\n                            <ul>\r\n                              {cartItems.map((cartItem, key) => {\r\n                                const discountedPrice = getDiscountPrice(\r\n                                  cartItem.price,\r\n                                  cartItem.discount\r\n                                );\r\n                                let finalProductPrice = (\r\n                                  cartItem.price * currency.currencyRate\r\n                                ).toFixed(2);\r\n                                const finalDiscountedPrice = (\r\n                                  discountedPrice * currency.currencyRate\r\n                                ).toFixed(2);\r\n                                let quantAdd;\r\n                                if (!profile.isEmpty) {\r\n                                  if (cartItem.quantity < cartItem.minQuant) {\r\n                                    addToCart(\r\n                                      cartItem,\r\n                                      addToast,\r\n                                      cartItem.minQuant - cartItem.quantity\r\n                                    );\r\n                                  }\r\n                                  quantAdd = cartItem.minQuant;\r\n                                  finalProductPrice = +(\r\n                                    cartItem.priceDis * currency.currencyRate\r\n                                  ).toFixed(2);\r\n                                }\r\n\r\n                                discountedPrice != null && profile.isEmpty\r\n                                  ? (cartTotalPrice +=\r\n                                      finalDiscountedPrice * cartItem.quantity)\r\n                                  : (cartTotalPrice +=\r\n                                      finalProductPrice * cartItem.quantity);\r\n\r\n                                return (\r\n                                  <li key={key}>\r\n                                    <span className=\"order-middle-left\">\r\n                                      {cartItem.name} X {cartItem.quantity}\r\n                                    </span>{\" \"}\r\n                                    <span className=\"order-price\">\r\n                                      {discountedPrice !== null &&\r\n                                      profile.isEmpty\r\n                                        ? currency.currencySymbol +\r\n                                          (\r\n                                            finalDiscountedPrice *\r\n                                            cartItem.quantity\r\n                                          ).toFixed(2)\r\n                                        : currency.currencySymbol +\r\n                                          (\r\n                                            finalProductPrice *\r\n                                            cartItem.quantity\r\n                                          ).toFixed(2)}\r\n                                    </span>\r\n                                  </li>\r\n                                );\r\n                              })}\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"your-order-bottom\">\r\n                            <ul>\r\n                              <li className=\"your-order-shipping\">Shipping</li>\r\n                              <li>Free shipping</li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"your-order-total\">\r\n                            <ul>\r\n                              <li className=\"order-total\">Total</li>\r\n                              <li>\r\n                                {currency.currencySymbol +\r\n                                  cartTotalPrice.toFixed(2)}\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"payment-method\"></div>\r\n                      </div>\r\n                      <div className=\"place-order mt-25\">\r\n                        <button\r\n                          type=\"submit\"\r\n                          form=\"checkout\"\r\n                          className=\"btn-hover\"\r\n                        >\r\n                          Place Order\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            ) : (\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-12\">\r\n                  <div className=\"item-empty-area text-center\">\r\n                    <div className=\"item-empty-area__icon mb-30\">\r\n                      <i className=\"pe-7s-cash\"></i>\r\n                    </div>\r\n                    <div className=\"item-empty-area__text\">\r\n                      No items found in cart to checkout <br />{\" \"}\r\n                      <Link to={process.env.PUBLIC_URL + \"/shop-grid-standard\"}>\r\n                        Shop Now\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </LayoutOne>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nCheckout.propTypes = {\r\n  cartItems: PropTypes.array,\r\n  currency: PropTypes.object,\r\n  location: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    cartItems: state.cartData,\r\n    currency: state.currencyData,\r\n    profile: state.firebase.profile,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addToCart: (item, addToast, quantityCount) => {\r\n      dispatch(addToCart(item, addToast, quantityCount));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);\r\n"],"sourceRoot":""}